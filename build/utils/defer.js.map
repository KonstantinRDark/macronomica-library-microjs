{"version":3,"sources":["../../src/utils/defer.js"],"names":["defer","cb","hasFunction","promise","resolve","reject","handlerResolve","handlerReject","result","error"],"mappings":";;;;;;;;;;;;;;kBACwBA,K;;;;AAAT,SAASA,KAAT,CAAeC,EAAf,EAAmB;AAChC,QAAMC,cAAcD,MAAM,OAAOA,EAAP,KAAc,UAAxC;AACA,QAAMD,QAAQ,EAAd;;AAEAA,QAAMG,OAAN,GAAgB,sBAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB,sBAAcL,KAAd,EAAqB;AACpEI,aAASE,eAAeN,KAAf,EAAsBI,OAAtB,CAD2D;AAEpEC,YAASE,cAAcP,KAAd,EAAqBK,MAArB;AAF2D,GAArB,CAAjC,CAAhB;;AAKA,SAAOL,KAAP;;AAEA,WAASM,cAAT,CAAwBN,KAAxB,EAA+BI,OAA/B,EAAwC;AACtC,WAAOI,UAAU;AACfJ,cAAQI,MAAR;;AAEA,UAAIN,WAAJ,EAAiB;AACfD,WAAG,IAAH,EAASO,MAAT;AACD;;AAED,aAAOR,MAAMG,OAAb;AACD,KARD;AASD;;AAED,WAASI,aAAT,CAAuBP,KAAvB,EAA8BK,MAA9B,EAAsC;AACpC,WAAOI,SAAS;AACdJ,aAAOI,KAAP;;AAEA,UAAIP,WAAJ,EAAiB;AACfD,WAAGQ,KAAH;AACD;;AAED,aAAOT,MAAMG,OAAb;AACD,KARD;AASD;AACF","file":"defer.js","sourcesContent":["\nexport default function defer(cb) {\n  const hasFunction = cb && typeof cb === 'function';\n  const defer = {};\n\n  defer.promise = new Promise((resolve, reject) => Object.assign(defer, {\n    resolve: handlerResolve(defer, resolve),\n    reject : handlerReject(defer, reject),\n  }));\n\n  return defer;\n\n  function handlerResolve(defer, resolve) {\n    return result => {\n      resolve(result);\n\n      if (hasFunction) {\n        cb(null, result);\n      }\n\n      return defer.promise;\n    };\n  }\n\n  function handlerReject(defer, reject) {\n    return error => {\n      reject(error);\n\n      if (hasFunction) {\n        cb(error);\n      }\n\n      return defer.promise;\n    };\n  }\n};"]}