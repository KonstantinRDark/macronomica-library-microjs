{"version":3,"sources":["../../src/utils/defer.js"],"names":["defer","cb","hasFunction","promise","Promise","resolve","reject","Object","assign","handlerResolve","handlerReject","result","error"],"mappings":";;;;;kBACwBA,K;AAAT,SAASA,KAAT,CAAeC,EAAf,EAAmB;AAChC,MAAMC,cAAcD,MAAM,OAAOA,EAAP,KAAc,UAAxC;AACA,MAAMD,QAAQ,EAAd;;AAEAA,QAAMG,OAAN,GAAgB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;AAAA,WAAqBC,OAAOC,MAAP,CAAcR,KAAd,EAAqB;AACpEK,eAASI,eAAeT,KAAf,EAAsBK,OAAtB,CAD2D;AAEpEC,cAASI,cAAcV,KAAd,EAAqBM,MAArB;AAF2D,KAArB,CAArB;AAAA,GAAZ,CAAhB;;AAKA,SAAON,KAAP;;AAEA,WAASS,cAAT,CAAwBT,KAAxB,EAA+BK,OAA/B,EAAwC;AACtC,WAAO,kBAAU;AACfA,cAAQM,MAAR;;AAEA,UAAIT,WAAJ,EAAiB;AACfD,WAAG,IAAH,EAASU,MAAT;AACD;;AAED,aAAOX,MAAMG,OAAb;AACD,KARD;AASD;;AAED,WAASO,aAAT,CAAuBV,KAAvB,EAA8BM,MAA9B,EAAsC;AACpC,WAAO,iBAAS;AACdA,aAAOM,KAAP;;AAEA,UAAIV,WAAJ,EAAiB;AACfD,WAAGW,KAAH;AACD;;AAED,aAAOZ,MAAMG,OAAb;AACD,KARD;AASD;AACF","file":"defer.js","sourcesContent":["\nexport default function defer(cb) {\n  const hasFunction = cb && typeof cb === 'function';\n  const defer = {};\n\n  defer.promise = new Promise((resolve, reject) => Object.assign(defer, {\n    resolve: handlerResolve(defer, resolve),\n    reject : handlerReject(defer, reject),\n  }));\n\n  return defer;\n\n  function handlerResolve(defer, resolve) {\n    return result => {\n      resolve(result);\n\n      if (hasFunction) {\n        cb(null, result);\n      }\n\n      return defer.promise;\n    };\n  }\n\n  function handlerReject(defer, reject) {\n    return error => {\n      reject(error);\n\n      if (hasFunction) {\n        cb(error);\n      }\n\n      return defer.promise;\n    };\n  }\n};"]}