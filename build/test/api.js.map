{"version":3,"sources":["../../src/test/api.js"],"names":["worker","id","listen","host","port","use","label","add","ping","client","api","run","catch","log","error","then","act","result","info"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,MAAMA,SAAS,gBAAM,EAAEC,IAAI,QAAN,EAAgBC,QAAQ,EAAEC,MAAM,WAAR,EAAqBC,MAAM,IAA3B,EAAxB,EAAN,EACZC,GADY,CACR,0BAAiB,EAAEC,OAAO,QAAT,EAAjB,CADQ,EAEZC,GAFY,CAER,UAFQ,EAEI,SAASC,IAAT,GAAgB;AAAE,SAAO,MAAP;AAAe,CAFrC,CAAf;;AAIA,MAAMC,SAAS,gBAAM,EAAER,IAAI,QAAN,EAAN,EACZI,GADY,CACR,0BAAiB,EAAEC,OAAO,QAAT,EAAjB,CADQ,EAEZI,GAFY,CAER,QAFQ,EAEE,EAAEP,MAAM,WAAR,EAAqBC,MAAM,IAA3B,EAFF,CAAf;;AAIAJ,OACGW,GADH,GAEGC,KAFH,CAESH,OAAOI,GAAP,CAAWC,KAFpB,EAGGC,IAHH,CAGQ,MAAMN,OACTE,GADS,GAETI,IAFS,CAEJ,MAAMN,OAAOO,GAAP,CAAW,sBAAX,CAFF,EAGTD,IAHS,CAGJE,UAAUR,OAAOI,GAAP,CAAWK,IAAX,CAAgB,UAAhB,EAA4BD,MAA5B,CAHN,EAITL,KAJS,CAIHH,OAAOI,GAAP,CAAWC,KAJR,CAHd","file":"api.js","sourcesContent":["import Micro from './../';\nimport WinstonLogPlugin from './../plugins/log-winston';\n\nconst worker = Micro({ id: 'worker', listen: { host: '127.0.0.1', port: 8000 } })\n  .use(WinstonLogPlugin({ label: 'worker' }))\n  .add('cmd:ping', function ping() { return 'pong' });\n\nconst client = Micro({ id: 'client' })\n  .use(WinstonLogPlugin({ label: 'client' }))\n  .api('worker', { host: '127.0.0.1', port: 8000 });\n\nworker\n  .run()\n  .catch(client.log.error)\n  .then(() => client\n    .run()\n    .then(() => client.act('api:worker, cmd:ping'))\n    .then(result => client.log.info('cmd:ping', result))\n    .catch(client.log.error)\n  );"]}