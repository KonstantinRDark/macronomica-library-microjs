{"version":3,"sources":["../../src/test/all.js"],"names":["HOST","PORT","prefix","micro","listen","host","port","use","add","ping","run","then","method","headers","body","JSON","stringify","cmd","response","json","result","log","info","catch","error"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,OAAO,WAAb;AACA,MAAMC,OAAO,IAAb;AACA,MAAMC,SAAS,MAAf;;AAEA,MAAMC,QAAQ,gBAAM,EAAEC,QAAQ,EAAEC,MAAML,IAAR,EAAcM,MAAML,IAApB,EAAV,EAAN,EACXM,GADW,CACP,2BADO,EAEXC,GAFW,CAEP,UAFO,EAEK,SAASC,IAAT,GAAgB;AAAE,SAAO,MAAP;AAAgB,CAFvC,CAAd;;AAIAN,MACGO,GADH,GAEGC,IAFH,CAEQ,MAAM;AACV,SAAO,yBAAO,WAAUX,IAAM,MAAIC,IAAM,KAAGC,MAAQ,GAA5C,EACL,EAAEU,QAAS,MAAX;AACEC,aAAS,EAAE,gBAAgB,kBAAlB,EADX;AAEEC,UAASC,KAAKC,SAAL,CAAe,EAAEC,KAAK,MAAP,EAAf;AAFX,GADK,EAKJN,IALI,CAKCO,YAAYA,SAASC,IAAT,EALb,EAMJR,IANI,CAMCS,UAAUjB,MAAMkB,GAAN,CAAUC,IAAV,CAAe,UAAf,EAA2BF,MAA3B,CANX,EAOJG,KAPI,CAOEC,SAASrB,MAAMkB,GAAN,CAAUG,KAAV,CAAgB,UAAhB,EAA4BA,KAA5B,CAPX,CAAP;AAQD,CAXH,EAYGD,KAZH,CAYSC,SAASrB,MAAMkB,GAAN,CAAUG,KAAV,CAAgBA,KAAhB,CAZlB","file":"all.js","sourcesContent":["import fetch from 'node-fetch';\nimport Micro from './../';\nimport WinstonLogPlugin from './../plugins/log-winston';\n\nconst HOST = '127.0.0.1';\nconst PORT = 8000;\nconst prefix = '/act';\n\nconst micro = Micro({ listen: { host: HOST, port: PORT } })\n  .use(WinstonLogPlugin())\n  .add('cmd:ping', function ping() { return 'pong'; });\n\nmicro\n  .run()\n  .then(() => {\n    return fetch(`http://${ HOST }:${ PORT }${ prefix }`,\n      { method : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body   : JSON.stringify({ cmd: 'ping' })\n      })\n      .then(response => response.json())\n      .then(result => micro.log.info('cmd:ping', result))\n      .catch(error => micro.log.error('cmd:ping', error));\n  })\n  .catch(error => micro.log.error(error))\n;\n"]}