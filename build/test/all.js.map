{"version":3,"sources":["../../src/test/all.js"],"names":["HOST","PORT","prefix","micro","host","port","use","add","ping","log","info","run","then","method","headers","body","JSON","stringify","cmd","response","json","result","catch","error"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAO,WAAb;AACA,IAAMC,OAAO,IAAb;AACA,IAAMC,SAAS,MAAf;;AAEA,IAAMC,QAAQ,gBAAM,EAAEC,MAAMJ,IAAR,EAAcK,MAAMJ,IAApB,EAAN,EACXK,GADW,CACP,2BADO,EAEXC,GAFW,CAEP,UAFO,EAEK,SAASC,IAAT,GAAgB;AAC/BL,QAAMM,GAAN,CAAUC,IAAV,CAAe,MAAf;AACA,SAAO,MAAP;AACD,CALW,CAAd;;AAOAP,MACGQ,GADH,GAEGC,IAFH,CAEQ,YAAM;AACV,SAAO,qCAAiBZ,IAAjB,SAA2BC,IAA3B,GAAoCC,MAApC,EACL;AACEW,YAAS,MADX;AAEEC,aAAS,EAAE,gBAAgB,kBAAlB,EAFX;AAGEC,UAASC,KAAKC,SAAL,CAAe,EAAEC,KAAK,MAAP,EAAf;AAHX,GADK,EAMJN,IANI,CAMC;AAAA,WAAYO,SAASC,IAAT,EAAZ;AAAA,GAND,EAOJR,IAPI,CAOC;AAAA,WAAUT,MAAMM,GAAN,CAAUC,IAAV,CAAeW,MAAf,CAAV;AAAA,GAPD,EAQJC,KARI,CAQE;AAAA,WAASnB,MAAMM,GAAN,CAAUc,KAAV,CAAgBA,KAAhB,CAAT;AAAA,GARF,CAAP;AASD,CAZH,EAaGD,KAbH,CAaS;AAAA,SAASnB,MAAMM,GAAN,CAAUc,KAAV,CAAgBA,KAAhB,CAAT;AAAA,CAbT","file":"all.js","sourcesContent":["import fetch from 'node-fetch';\nimport Micro from './../';\nimport WinstonLogPlugin from './../plugins/log-winston';\n\nconst HOST = '127.0.0.1';\nconst PORT = 8000;\nconst prefix = '/act';\n\nconst micro = Micro({ host: HOST, port: PORT })\n  .use(WinstonLogPlugin())\n  .add('cmd:ping', function ping() {\n    micro.log.info('pong');\n    return 'pong';\n  });\n\nmicro\n  .run()\n  .then(() => {\n    return fetch(`http://${ HOST }:${ PORT }${ prefix }`,\n      {\n        method : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body   : JSON.stringify({ cmd: 'ping' })\n      })\n      .then(response => response.json())\n      .then(result => micro.log.info(result))\n      .catch(error => micro.log.error(error));\n  })\n  .catch(error => micro.log.error(error))\n;\n"]}