{"version":3,"sources":["../../src/test/all.js"],"names":["HOST","PORT","prefix","micro","host","port","use","add","ping","run","then","method","headers","body","JSON","stringify","cmd","response","json","log","info","result","catch","error"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAO,WAAb;AACA,IAAMC,OAAO,IAAb;AACA,IAAMC,SAAS,MAAf;;AAEA,IAAMC,QAAQ,gBAAM,EAAEC,MAAMJ,IAAR,EAAcK,MAAMJ,IAApB,EAAN,EACXK,GADW,CACP,2BADO,EAEXC,GAFW,CAEP,UAFO,EAEK,SAASC,IAAT,GAAgB;AAAE,SAAO,MAAP;AAAgB,CAFvC,CAAd;;AAIAL,MACGM,GADH,GAEGC,IAFH,CAEQ,YAAM;AACV,SAAO,qCAAiBV,IAAjB,SAA2BC,IAA3B,GAAoCC,MAApC,EACL,EAAES,QAAS,MAAX;AACEC,aAAS,EAAE,gBAAgB,kBAAlB,EADX;AAEEC,UAASC,KAAKC,SAAL,CAAe,EAAEC,KAAK,MAAP,EAAf;AAFX,GADK,EAKJN,IALI,CAKC;AAAA,WAAYO,SAASC,IAAT,EAAZ;AAAA,GALD,EAMJR,IANI,CAMC;AAAA,WAAUP,MAAMgB,GAAN,CAAUC,IAAV,CAAe,UAAf,EAA2BC,MAA3B,CAAV;AAAA,GAND,EAOJC,KAPI,CAOE;AAAA,WAASnB,MAAMgB,GAAN,CAAUI,KAAV,CAAgB,UAAhB,EAA4BA,KAA5B,CAAT;AAAA,GAPF,CAAP;AAQD,CAXH,EAYGD,KAZH,CAYS;AAAA,SAASnB,MAAMgB,GAAN,CAAUI,KAAV,CAAgBA,KAAhB,CAAT;AAAA,CAZT","file":"all.js","sourcesContent":["import fetch from 'node-fetch';\nimport Micro from './../';\nimport WinstonLogPlugin from './../plugins/log-winston';\n\nconst HOST = '127.0.0.1';\nconst PORT = 8000;\nconst prefix = '/act';\n\nconst micro = Micro({ host: HOST, port: PORT })\n  .use(WinstonLogPlugin())\n  .add('cmd:ping', function ping() { return 'pong'; });\n\nmicro\n  .run()\n  .then(() => {\n    return fetch(`http://${ HOST }:${ PORT }${ prefix }`,\n      { method : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body   : JSON.stringify({ cmd: 'ping' })\n      })\n      .then(response => response.json())\n      .then(result => micro.log.info('cmd:ping', result))\n      .catch(error => micro.log.error('cmd:ping', error));\n  })\n  .catch(error => micro.log.error(error))\n;\n"]}