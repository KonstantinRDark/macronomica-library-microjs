{"version":3,"sources":["../src/factory-method.js"],"names":["factoryMethod","STATE_INIT","STATE_WAIT","STATE_RUN","STATE_END","listenSettings","app","state","manager","gex","subscribers","run","end","Object","assign","log","use","add","del","api","act"],"mappings":";;;;;kBAsBwBA,a;;AAtBxB;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACA,IAAMC,aAAa,MAAnB;AACA,IAAMC,aAAa,MAAnB;AACA,IAAMC,YAAY,KAAlB;AACA,IAAMC,YAAY,KAAlB;AACA;;;;AAIe,SAASJ,aAAT,CAAuBK,cAAvB,EAAuC;AACpD;;;AAGA,MAAMC,MAAM;AACV;;;AAGAC,WAAaN,UAJH;AAKV;;;AAGAO,aAAa,sBAAO,EAAEC,KAAK,IAAP,EAAP,CARH;AASV;;;;AAIAC,iBAAa;AACXC,WAAK,EADM,EACG;AACdC,WAAK,EAFM,CAEG;AAFH;AAbH,GAAZ;;AAmBAC,SAAOC,MAAP,CAAcR,GAAd,EAAmB;AACjBS,SAAK,mBAAIT,GAAJ,CADY;AAEjBU,SAAK,mBAAIV,GAAJ,CAFY;AAGjBW,SAAK,mBAAIX,GAAJ,CAHY;AAIjBY,SAAK,mBAAIZ,GAAJ,CAJY;AAKjBa,SAAK,mBAAIb,GAAJ,CALY;AAMjBc,SAAK,mBAAId,GAAJ,CANY;AAOjBM,SAAK,mBAAIN,GAAJ,CAPY;AAQjBK,SAAK,mBAAIL,GAAJ,EAASD,cAAT;AARY,GAAnB;;AAWA,SAAOC,GAAP;AACD","file":"factory-method.js","sourcesContent":["import Patrun from 'patrun';\n\nimport defer from './utils/defer';\n\nimport log from './methods/log';\nimport use from './methods/use';\nimport add from './methods/add';\nimport del from './methods/del';\nimport act from './methods/act';\nimport api from './methods/api';\nimport end from './methods/end';\nimport run from './methods/run';\n\n// Статус блокирует\nconst STATE_INIT = 'init';\nconst STATE_WAIT = 'wait';\nconst STATE_RUN = 'run';\nconst STATE_END = 'run';\n/**\n * @param {object} listenSettings\n * @returns {app}\n */\nexport default function factoryMethod(listenSettings) {\n  /**\n   * @namespace app\n   */\n  const app = {\n    /**\n     * @type {string}\n     */\n    state      : STATE_INIT,\n    /**\n     * @type {object}\n     */\n    manager    : Patrun({ gex: true }),\n    /**\n     * Список подписчиков\n     * @type {{ run: Array<function>, end: Array<function> }}\n     */\n    subscribers: {\n      run: [],      // подписчики для этапа запуска работы\n      end: []       // подписчики для этапа завершения работы\n    }\n  };\n\n  Object.assign(app, {\n    log: log(app),\n    use: use(app),\n    add: add(app),\n    del: del(app),\n    api: api(app),\n    act: act(app),\n    end: end(app),\n    run: run(app, listenSettings),\n  });\n\n  return app;\n}"]}