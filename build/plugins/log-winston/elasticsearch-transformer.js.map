{"version":3,"sources":["../../../src/plugins/log-winston/elasticsearch-transformer.js"],"names":["transformer","logData","transformed","timestamp","Date","toISOString","message","severity","level","meta","pin","action","plugin","other","fields","stringify","module","exports"],"mappings":";;;;AAAA;;;;AACA;;;;;;;;AAEA,MAAMA,cAAc,SAASA,WAAT,CAAqBC,OAArB,EAA8B;AAChD,QAAMC,cAAc,EAApB;AACAA,cAAa,YAAb,IAA8BD,QAAQE,SAAR,GAAoBF,QAAQE,SAA5B,GAAwC,IAAIC,IAAJ,GAAWC,WAAX,EAAtE;AACAH,cAAYI,OAAZ,GAAsBL,QAAQK,OAA9B;AACAJ,cAAYK,QAAZ,GAAuBN,QAAQO,KAA/B;;AAJgD,sBAMNP,QAAQQ,IANF;;AAAA,QAMxCC,GANwC,iBAMxCA,GANwC;AAAA,QAMnCC,MANmC,iBAMnCA,MANmC;AAAA,QAM3BC,MAN2B,iBAM3BA,MAN2B;AAAA,QAMhBC,KANgB;;AAQhDX,cAAYY,MAAZ;AACEJ,SAAQ,sBAAcA,GAAd,IAAqB,iBAAOK,SAAP,CAAiBL,GAAjB,CAArB,GAA6CA,GADvD;AAEEE,YAAQ,sBAAcA,MAAd,IAAwB,iBAAOG,SAAP,CAAiBH,MAAjB,CAAxB,GAAmDA,MAF7D;AAGED,YAAQ,sBAAcA,MAAd,IAAwB,iBAAOI,SAAP,CAAiBJ,MAAjB,CAAxB,GAAmDA;AAH7D,KAIKE,KAJL;;AAOA,SAAOX,WAAP;AACD,CAhBD;;AAkBAc,OAAOC,OAAP,GAAiBjB,WAAjB","file":"elasticsearch-transformer.js","sourcesContent":["import isPlainObject from 'lodash.isplainobject';\nimport jsonic from 'jsonic';\n\nconst transformer = function transformer(logData) {\n  const transformed = {};\n  transformed[ '@timestamp' ] = logData.timestamp ? logData.timestamp : new Date().toISOString();\n  transformed.message = logData.message;\n  transformed.severity = logData.level;\n  \n  const { pin, action, plugin, ...other } = logData.meta;\n  \n  transformed.fields = {\n    pin   : isPlainObject(pin) ? jsonic.stringify(pin) : pin,\n    plugin: isPlainObject(plugin) ? jsonic.stringify(plugin) : plugin,\n    action: isPlainObject(action) ? jsonic.stringify(action) : action,\n    ...other\n  };\n  \n  return transformed;\n};\n\nmodule.exports = transformer;\n"]}