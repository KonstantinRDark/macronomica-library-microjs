{"version":3,"sources":["../../../../src/plugins/transport/http/index.js"],"names":["defaultOptions","micro","name","pluginId","handleListen","handleClient","plugin","id","queue","case","args","done","Promise","resolve","listen","close","options","client"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;kBAEe;AAAA,MAACA,cAAD,uEAAkB,EAAlB;AAAA,SAAyB,UAACC,KAAD,EAAQC,IAAR,EAAcC,QAAd,EAA2B;AACjE,QAAIC,qBAAJ;AACA,QAAIC,qBAAJ;AACA,QAAMC,SAAS,EAAEJ,UAAF,EAAQK,IAAIJ,QAAZ,EAAf;;AAEAF,UACGO,KADH,CACS;AACLC,YAAM,MADD;AAELC,YAAM,EAFD;AAGLC,YAAM;AAAA,eAAM,CAACP,YAAD,GAAgBQ,QAAQC,OAAR,EAAhB,GAAoCT,aAAaU,MAAb,EAA1C;AAAA;AAHD,KADT,EAMGN,KANH,CAMS;AACLC,YAAM,OADD;AAELC,YAAM,EAFD;AAGLC,YAAM;AAAA,eAAM,CAACP,YAAD,GAAgBQ,QAAQC,OAAR,EAAhB,GAAoCT,aAAaW,KAAb,EAA1C;AAAA;AAHD,KANT;;AAYA,WAAO;AACLD,cAAQ;AAAA,YAACE,OAAD,uEAAW,EAAX;AAAA,eAAkBZ,eAAe,sBAAOH,KAAP,EAAcK,MAAd,eAA2BN,cAA3B,EAA8CgB,OAA9C,EAAjC;AAAA,OADH;AAELC,cAAQ;AAAA,YAACD,OAAD,uEAAW,EAAX;AAAA,eAAkBX,eAAe,sBAAOJ,KAAP,EAAcK,MAAd,eAA2BN,cAA3B,EAA8CgB,OAA9C,EAAjC;AAAA;AAFH,KAAP;AAID,GArBc;AAAA,C","file":"index.js","sourcesContent":["import listen from './listen';\nimport client from './client';\n\nexport default (defaultOptions = {}) => (micro, name, pluginId) => {\n  let handleListen;\n  let handleClient;\n  const plugin = { name, id: pluginId };\n\n  micro\n    .queue({\n      case: 'wait',\n      args: [],\n      done: () => !handleListen ? Promise.resolve() : handleListen.listen()\n    })\n    .queue({\n      case: 'close',\n      args: [],\n      done: () => !handleListen ? Promise.resolve() : handleListen.close()\n    });\n\n  return {\n    listen: (options = {}) => handleListen = listen(micro, plugin, { ...defaultOptions, ...options }),\n    client: (options = {}) => handleClient = client(micro, plugin, { ...defaultOptions, ...options })\n  };\n};"]}