{"version":3,"sources":["../../../src/plugins/node-http/index.js"],"names":["NodeHttpPlugin","TRANSPORT","settings","microjs","onClose","manager","plugin","id","getTransportPin","getTransportListenPin","add","getHttpTransportRoute","del"],"mappings":";;;;;kBAIwBA,c;;AAJxB;;;;AACA;;;;;;;;AACA,IAAMC,YAAY,MAAlB;;AAEe,SAASD,cAAT,OAAyC;AAAA,MAAZE,QAAY;;AACtD,SAAO,UAACC,OAAD,SAAmC;AAAA,QAAvBC,OAAuB,SAAvBA,OAAuB;AAAA,QAAdC,OAAc,SAAdA,OAAc;;AACxC,QAAMC,SAAS,EAAEC,IAAI,sBAAN,EAAf;AACA,QAAMC,iCAAgCP,SAAtC;AACA,QAAMQ,uCAAsCR,SAAtC,iBAAN;;AAEAE,YAAQO,GAAR,CAAYF,eAAZ,EAA6B,SAASG,qBAAT,GAAiC;AAAE,aAAOL,MAAP;AAAe,KAA/E;AACAH,YAAQO,GAAR,CAAYD,qBAAZ,EAAmC,sBAAWN,OAAX,EAAoBG,MAApB,EAA4BF,OAA5B,EAAqCF,QAArC,CAAnC;;AAEAE,YAAQ;AAAA,aAAMD,QACXS,GADW,CACPJ,eADO,EAEXI,GAFW,CAEPH,qBAFO,CAAN;AAAA,KAAR;AAID,GAZD;AAaD","file":"index.js","sourcesContent":["import genid from './../../utils/genid';\nimport listenHttp from './methods/listen';\nconst TRANSPORT = 'http';\n\nexport default function NodeHttpPlugin({ ...settings }) {\n  return (microjs, { onClose, manager }) => {\n    const plugin = { id: genid() };\n    const getTransportPin = `transport:${ TRANSPORT }`;\n    const getTransportListenPin = `transport:${ TRANSPORT }, cmd:listen`;\n\n    microjs.add(getTransportPin, function getHttpTransportRoute() { return plugin });\n    microjs.add(getTransportListenPin, listenHttp(microjs, plugin, onClose, settings));\n\n    onClose(() => microjs\n      .del(getTransportPin)\n      .del(getTransportListenPin)\n    )\n  };\n}"]}