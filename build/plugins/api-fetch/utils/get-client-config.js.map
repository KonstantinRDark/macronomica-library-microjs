{"version":3,"sources":["../../../../src/plugins/api-fetch/utils/get-client-config.js"],"names":["getClientConfig","process","env","CONFIG_CLIENTS_SECTION","CONFIG_SSH_PRIVATE_KEY","SSH_PRIVATE_KEY","has","get","app","name","cfg","url","indexOf","ssh","privateKey","resolve","join","HOME"],"mappings":";;;;;kBAUwBA,e;;AAVxB;;;;AACA;;;;;;mBAOIC,QAAQC,G;yCALVC,sB;MAAAA,sB,yCAAyB,S;yCACzBC,sB;MAAAA,sB,yCAAyB,sB;yCACzBC,e;MAAAA,e,yCAAkB,iBAAOC,GAAP,CAAWF,sBAAX,IACd,iBAAOG,GAAP,CAAWH,sBAAX,CADc,GAEd,c;AAGS,SAASJ,eAAT,CAAyBQ,GAAzB,EAA8BC,IAA9B,EAAoC;AACjD,MAAI,CAAC,iBAAOH,GAAP,CAAY,GAAGH,sBAAwB,IAAIM,IAAM,EAAjD,CAAL,EAA0D;AACxD,WAAO,EAAP;AACD;;AAED,MAAIC,MAAM,EAAEC,KAAK,iBAAOJ,GAAP,CAAY,GAAGJ,sBAAwB,IAAIM,IAAM,EAAjD,CAAP,EAAV;;AAEA,MAAI,CAAC,CAAC,CAACC,IAAIC,GAAJ,CAAQC,OAAR,CAAgB,GAAhB,CAAP,EAA6B;AAC3BF,QAAIG,GAAJ,GAAU;AACRC,kBAAY,eAAKC,OAAL,CAAa,eAAKC,IAAL,CAAUf,QAAQC,GAAR,CAAYe,IAAtB,EAA4BZ,eAA5B,CAAb;AADJ,KAAV;AAGD;;AAED,SAAOK,GAAP;AACD","file":"get-client-config.js","sourcesContent":["import config from 'config';\nimport path from 'path';\nconst {\n  CONFIG_CLIENTS_SECTION = 'clients',\n  CONFIG_SSH_PRIVATE_KEY = 'client.sshPrivateKey',\n  SSH_PRIVATE_KEY = config.has(CONFIG_SSH_PRIVATE_KEY)\n    ? config.get(CONFIG_SSH_PRIVATE_KEY)\n    : '/.ssh/id_rsa'\n} = process.env;\n\nexport default function getClientConfig(app, name) {\n  if (!config.has(`${ CONFIG_CLIENTS_SECTION }.${ name }`)) {\n    return {};\n  }\n\n  let cfg = { url: config.get(`${ CONFIG_CLIENTS_SECTION }.${ name }`) };\n\n  if (!!~cfg.url.indexOf('@')) {\n    cfg.ssh = {\n      privateKey: path.resolve(path.join(process.env.HOME, SSH_PRIVATE_KEY))\n    };\n  }\n\n  return cfg;\n}"]}