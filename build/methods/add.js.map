{"version":3,"sources":["../../src/methods/add.js"],"names":["app","pin","cb","action","id","name","log","info","manager","add","callback"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA;;;;kBAIeA,OAAO;AACpB;;;;;;AAMA,SAAO,CAACC,GAAD,EAAMC,EAAN,KAAa;AAClB,UAAMC,SAAS;AACbC,UAAM,sBADO;AAEbC,YAAMH,GAAGG,IAAH,IAAW;AAFJ,KAAf;AAIAL,QAAIM,GAAJ,CAAQC,IAAR,CAAc,4BAAd,EAA2C,EAAEN,GAAF,EAAOE,MAAP,EAA3C;;AAEAH,QAAIQ,OAAJ,CAAYC,GAAZ,CAAgB,sBAASR,GAAT,IAAgB,sBAAOA,GAAP,CAAhB,GAA8BA,GAA9C,EAAmD,EAAEA,GAAF,EAAOE,MAAP,EAAeO,UAAUR,EAAzB,EAAnD;;AAEA,WAAOF,GAAP;AACD,GAVD;AAWD,C","file":"add.js","sourcesContent":["import isString from 'lodash.isstring';\nimport jsonic from 'jsonic';\nimport genid from './../utils/genid';\n\n/**\n * @param {app} app\n * @returns {function}\n */\nexport default app => {\n  /**\n   * @namespace app.add\n   * @param {string|object} pin\n   * @param {function} cb\n   * @returns {app}\n   */\n  return (pin, cb) => {\n    const action = {\n      id  : genid(),\n      name: cb.name || ''\n    };\n    app.log.info(`Добавление нового маршрута`, { pin, action });\n\n    app.manager.add(isString(pin) ? jsonic(pin) : pin, { pin, action, callback: cb });\n\n    return app;\n  };\n};"]}