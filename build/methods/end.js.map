{"version":3,"sources":["../../src/methods/end.js"],"names":["app","dfd","cb","promise","then","resolve","catch","reject"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;;;;kBAIeA,OAAO;AACpB,MAAIC,GAAJ;AACA;;;;;AAKA,SAAOC,MAAM;AACX,QAAID,GAAJ,EAAS;AACP,aAAOA,IAAIE,OAAX;AACD;;AAEDF,UAAM,qBAAMC,EAAN,CAAN;;AAEA,uCAAoBF,GAApB,EACGI,IADH,CACQH,IAAII,OADZ,EAEGC,KAFH,CAESL,IAAIM,MAFb;;AAIA,WAAON,IAAIE,OAAX;AACD,GAZD;AAaD,C","file":"end.js","sourcesContent":["import defer from './../utils/defer';\nimport runCloseSubscribers from './../utils/run-close-subscribers';\n\n/**\n * @param {app} app\n * @returns {function:Promise}\n */\nexport default app => {\n  let dfd;\n  /**\n   * @namespace app.end\n   * @param {function} [cb]\n   * @returns {Promise<app>}\n   */\n  return cb => {\n    if (dfd) {\n      return dfd.promise;\n    }\n\n    dfd = defer(cb);\n\n    runCloseSubscribers(app)\n      .then(dfd.resolve)\n      .catch(dfd.reject);\n\n    return dfd.promise;\n  };\n}"]}