{"version":3,"sources":["../../src/methods/end.js"],"names":["dfd","promise","cb","app","then","resolve","catch","reject"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;;;;kBAIe,eAAO;AACpB,MAAIA,YAAJ;AACA;;;;;AAKA,SAAO,cAAM;AACX,QAAIA,GAAJ,EAAS;AACP,aAAOA,IAAIC,OAAX;AACD;;AAEDD,UAAM,qBAAME,EAAN,CAAN;;AAEA,uCAAoBC,GAApB,EACGC,IADH,CACQJ,IAAIK,OADZ,EAEGC,KAFH,CAESN,IAAIO,MAFb;;AAIA,WAAOP,IAAIC,OAAX;AACD,GAZD;AAaD,C","file":"end.js","sourcesContent":["import defer from './../utils/defer';\nimport runCloseSubscribers from './../utils/run-close-subscribers';\n\n/**\n * @param {app} app\n * @returns {function:Promise}\n */\nexport default app => {\n  let dfd;\n  /**\n   * @namespace app.end\n   * @param {function} [cb]\n   * @returns {Promise<app>}\n   */\n  return cb => {\n    if (dfd) {\n      return dfd.promise;\n    }\n\n    dfd = defer(cb);\n\n    runCloseSubscribers(app)\n      .then(dfd.resolve)\n      .catch(dfd.reject);\n\n    return dfd.promise;\n  };\n}"]}