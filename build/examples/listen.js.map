{"version":3,"sources":["../../src/examples/listen.js"],"names":["HOST","PORT","prefix","micro","level","listen","host","port","use","run","then","method","headers","body","JSON","stringify","cmd","response","json","result","log","info","end","catch","error"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,OAAO,WAAb;AACA,MAAMC,OAAO,IAAb;AACA,MAAMC,SAAS,MAAf;;AAEA,MAAMC,QAAQ,gBAAM,EAAEC,mBAAF,EAAqBC,QAAQ,EAAEC,MAAMN,IAAR,EAAcO,MAAMN,IAApB,EAA7B,EAAN,EACXO,GADW,CACP,2BADO,CAAd;;AAGAL,MACGM,GADH,GAEGC,IAFH,CAEQ,MAAM;AACV,SAAO,yBAAO,WAAUV,IAAM,MAAIC,IAAM,KAAGC,MAAQ,GAA5C,EACL,EAAES,QAAS,MAAX;AACEC,aAAS,EAAE,gBAAgB,kBAAlB,EADX;AAEEC,UAASC,KAAKC,SAAL,CAAe,EAAEC,KAAK,MAAP,EAAf;AAFX,GADK,EAKJN,IALI,CAKCO,YAAYA,SAASC,IAAT,EALb,EAMJR,IANI,CAMCS,UAAUhB,MAAMiB,GAAN,CAAUC,IAAV,CAAe,UAAf,EAA2BF,MAA3B,CANX,EAOJT,IAPI,CAOCS,UAAUhB,MAAMmB,GAAN,EAPX,EAQJC,KARI,CAQEpB,MAAMiB,GAAN,CAAUI,KARZ,CAAP;AASD,CAZH,EAaGD,KAbH,CAaSpB,MAAMiB,GAAN,CAAUI,KAbnB","file":"listen.js","sourcesContent":["import fetch from 'node-fetch';\nimport Micro, { LEVEL_INFO } from './../';\nimport WinstonLogPlugin from './../plugins/log-winston';\n\nconst HOST = '127.0.0.1';\nconst PORT = 8000;\nconst prefix = '/act';\n\nconst micro = Micro({ level: LEVEL_INFO, listen: { host: HOST, port: PORT } })\n  .use(WinstonLogPlugin());\n\nmicro\n  .run()\n  .then(() => {\n    return fetch(`http://${ HOST }:${ PORT }${ prefix }`,\n      { method : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body   : JSON.stringify({ cmd: 'ping' })\n      })\n      .then(response => response.json())\n      .then(result => micro.log.info('cmd:ping', result))\n      .then(result => micro.end())\n      .catch(micro.log.error);\n  })\n  .catch(micro.log.error)\n;\n"]}