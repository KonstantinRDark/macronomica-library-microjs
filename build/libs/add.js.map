{"version":3,"sources":["../../src/libs/add.js"],"names":["micro","pin","callback","action","id","name","logger","info","payload","actions","actionManager","add"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA;kBACe,UAACA,KAAD,EAAQC,GAAR,EAAaC,QAAb,EAA0B;AACvC,MAAMC,SAAS;AACbC,QAAM,sBADO;AAEbH,SAAM,sBAASA,GAAT,IAAgB,sBAAOA,GAAP,CAAhB,GAA8BA,GAFvB;AAGbI,UAAMH,SAASG,IAAT,IAAiB,EAHV;AAIbH;AAJa,GAAf;;AAOAF,QAAMM,MAAN,CAAaC,IAAb,uJAAgD,EAAEH,IAAID,OAAOC,EAAb,EAAiBI,SAASP,GAA1B,EAAhD;;AAEAD,QAAMS,OAAN,CAAeN,OAAOC,EAAtB,IAA6BD,MAA7B;;AAEAH,QAAMU,aAAN,CAAoBC,GAApB,CAAwBR,OAAOF,GAA/B,EAAoCE,OAAOC,EAA3C;;AAEA,SAAOJ,KAAP;AACD,C","file":"add.js","sourcesContent":["import isString from 'lodash.isstring';\nimport jsonic from 'jsonic';\nimport genid from './../utils/genid';\n\n// Добавляет маршрут\nexport default (micro, pin, callback) => {\n  const action = {\n    id  : genid(),\n    pin : isString(pin) ? jsonic(pin) : pin,\n    name: callback.name || '',\n    callback\n  };\n\n  micro.logger.info(`Добавление нового маршрута`, { id: action.id, payload: pin });\n\n  micro.actions[ action.id ] = action;\n\n  micro.actionManager.add(action.pin, action.id);\n\n  return micro;\n};"]}